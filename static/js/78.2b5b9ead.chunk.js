(this["webpackJsonpfirst-example"]=this["webpackJsonpfirst-example"]||[]).push([[78],{1185:function(e,t,n){"use strict";n.r(t),n.d(t,"FeatureServiceSnappingSource",(function(){return re}));var i=n(7),r=n.n(i),a=n(9),o=n(10),s=n(2),c=n(3),l=n(5),u=n(6),b=n(0),d=n(33),f=n(118),h=n(127),O=n(4),p=n(25),v=n(1),j=(n(14),n(16),n(13),n(8)),g=n(273),y=n(39),w=n(15),k=n(11),m=n(85),I=n(797);function S(e,t){return Object(I.e)(t.extent,_),Object(I.f)(_,Object(k.w)(H,e.x,e.y,0))}var _=Object(I.a)(),H=Object(m.e)(),P=n(427),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).pointOfInterest=null,i}return Object(c.a)(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=Object(O.k)(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort((function(e,n){return S(t,e)-S(t,n)})),e}},{key:"scaleEnabled",value:function(){return Object(P.b)(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}},{key:"tilesCoveringView",get:function(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||Object(O.j)(this.tileInfo))return[];if(!this.scaleEnabled)return[];var e,t=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),n=t.spans,i=t.lodInfo,r=i.level,a=[],o=Object(w.a)(n);try{for(o.s();!(e=o.n()).done;)for(var s=e.value,c=s.row,l=s.colFrom,u=s.colTo,b=l;b<=u;b++){var d={id:null,level:r,row:c,col:i.normalizeCol(b)};this.tileInfo.updateTileInfo(d),a.push(d)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"tileInfo",get:function(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}},{key:"tileSize",get:function(){return Object(O.k)(this.tileInfo)?this.tileInfo.size[0]:256}},{key:"initialize",value:function(){var e=this;this.handles.add(this.watch("view.state.viewpoint",(function(){return e.notifyChange("tilesCoveringView")}),!0))}}]),n}(Object(f.b)(d.a));Object(b.a)([Object(v.b)({readOnly:!0})],T.prototype,"tiles",null),Object(b.a)([Object(v.b)({readOnly:!0})],T.prototype,"scaleEnabled",null),Object(b.a)([Object(v.b)({readOnly:!0})],T.prototype,"tilesCoveringView",null),Object(b.a)([Object(v.b)({readOnly:!0})],T.prototype,"tileInfo",null),Object(b.a)([Object(v.b)({readOnly:!0})],T.prototype,"tileSize",null),Object(b.a)([Object(v.b)({constructOnly:!0})],T.prototype,"view",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],T.prototype,"layer",void 0),Object(b.a)([Object(v.b)()],T.prototype,"pointOfInterest",void 0),T=Object(b.a)([Object(j.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],T);var M=n(24),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).pointOfInterest=null,i}return Object(c.a)(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(Object(O.k)(t))for(var n=e.map((function(e){return S(t,e)})),i=1;i<n.length;i++)if(n[i-1]>n[i])return e.sort((function(e,n){return S(t,e)-S(t,n)})),e.slice();return e}},{key:"tilesCoveringView",get:function(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(N)}},{key:"tileInfo",get:function(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}},{key:"tileSize",get:function(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}},{key:"effectivePointOfInterest",get:function(){var e,t=this.pointOfInterest;return Object(O.k)(t)?t:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}},{key:"initialize",value:function(){var e=this;this.handles.add(Object(p.a)(this.view,"featureTiles",(function(t){e.handles.remove(E),t&&e.handles.add(t.addClient(),E)})))}},{key:"filterTiles",value:function(e){return Object(O.j)(e)?[]:e.filter((function(e){return Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>z&&2===e.measures.visibility}))}}]),n}(f.a);function N(e){var t=Object(M.a)(e.lij,3),n=t[0],i=t[1],r=t[2],a=e.extent;return{id:"".concat(n,"/").concat(i,"/").concat(r),level:n,row:i,col:r,extent:a}}Object(b.a)([Object(v.b)({readOnly:!0})],x.prototype,"tiles",null),Object(b.a)([Object(v.b)({readOnly:!0})],x.prototype,"tilesCoveringView",null),Object(b.a)([Object(v.b)({readOnly:!0})],x.prototype,"tileInfo",null),Object(b.a)([Object(v.b)({readOnly:!0})],x.prototype,"tileSize",null),Object(b.a)([Object(v.b)({constructOnly:!0})],x.prototype,"view",void 0),Object(b.a)([Object(v.b)()],x.prototype,"pointOfInterest",void 0),Object(b.a)([Object(v.b)()],x.prototype,"effectivePointOfInterest",null),x=Object(b.a)([Object(j.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],x);var z=50,E="feature-tiles",C=n(829),F=n(48),R=n(99),A=n(97),L=n(37),U=n(64),V=n(40),J=n(204),D=n(119),q=n(193),W=n(203),Y=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]],B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).updating=!1,i.enablePolygons=!0,i.enableLabels=!0,i._polygons=new Map,i._labels=new Map,i._enabled=!0,i}return Object(c.a)(n,[{key:"initialize",value:function(){this._symbols=Y.map((function(e){return new D.a({color:[e[0],e[1],e[2],.6],outline:{color:"black",width:1}})})),this.update()}},{key:"destroy",value:function(){this._enabled=!1,this.clear()}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.update())}},{key:"update",value:function(){var e=this;if(this._enabled){var t=this.getTiles(),n=new Array,i=new Set((this._labels.size,this._labels.keys()));t.forEach((function(r,a){var o=r.lij.toString();i.delete(o);var s=r.lij[0],c=r.geometry;if(e.enablePolygons&&!e._polygons.has(o)){var l=new U.a({geometry:c,symbol:e._symbols[s%e._symbols.length]});e._polygons.set(o,l),n.push(l)}if(e.enableLabels){var u=function(e){if(Object(O.k)(e.label))return e.label;var t=e.lij.toString();return Object(O.k)(e.loadPriority)&&(t+=" (".concat(e.loadPriority,")")),t}(r),b=a/(t.length-1),d=Object(V.m)(0,200,b),f=Object(V.m)(20,6,b)/.75,h=Object(O.k)(r.loadPriority)&&r.loadPriority>=t.length,p=new L.a([d,h?0:d,h?0:d]),v="3d"===e.view.type?function(){return new J.a({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new W.a({text:u,halo:{color:"white",size:1/.75},material:{color:p},size:f})]})}:function(){return new q.a({text:u,haloColor:"white",haloSize:1/.75,color:p,size:f})};if(e._labels.has(o)){var j=e._labels.get(o),g=v();(Object(O.j)(j.symbol)||JSON.stringify(g)!==JSON.stringify(j.symbol))&&(j.symbol=g)}else{var y=new U.a({geometry:c.extent.center,symbol:v()});e._labels.set(o,y),n.push(y)}}}));var r=new Array;i.forEach((function(t){e._polygons.has(t)&&(r.push(e._polygons.get(t)),e._polygons.delete(t)),e._labels.has(t)&&(r.push(e._labels.get(t)),e._labels.delete(t))})),this.view.graphics.removeMany(r),this.view.graphics.addMany(n)}else this.clear()}},{key:"clear",value:function(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}}]),n}(d.a);Object(b.a)([Object(v.b)({constructOnly:!0})],B.prototype,"view",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],B.prototype,"updating",void 0),Object(b.a)([Object(v.b)()],B.prototype,"enabled",null);var G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).handles=new F.a,i}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this,t=setInterval((function(){return e.fetchDebugInfo()}),2e3);this.handles.add(Object(h.c)((function(){return clearInterval(t)})))}},{key:"destroy",value:function(){this.handles.destroy()}},{key:"getTiles",value:function(){var e=this;if(!this.debugInfo)return[];var t=new Map,n=new Map;this.debugInfo.storedTiles.forEach((function(e){t.set(e.data.id,e.featureCount)})),this.debugInfo.pendingTiles.forEach((function(e){t.set(e.data.id,e.featureCount),n.set(e.data.id,e.state)}));var i=function(e){var i,r=n.get(e),a=null!=(i=t.get(e))?i:"?";return r?"".concat(r,":").concat(a,"\n").concat(e):"store:".concat(a,"\n").concat(e)},r=new Map;return this.debugInfo.storedTiles.forEach((function(e){r.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((function(e){r.set(e.data.id,e.data)})),Array.from(r.values()).map((function(t){return{lij:[t.level,t.row,t.col],geometry:R.a.fromExtent(Object(A.v)(t.extent,e.view.spatialReference)),label:i(t.id)}}))}},{key:"fetchDebugInfo",value:function(){var e=this;this.handle.getDebugInfo(null).then((function(t){e.debugInfo=t,e.update()}))}}]),n}(B=Object(b.a)([Object(j.a)("esri.views.support.TileTreeDebugger")],B));Object(b.a)([Object(v.b)({constructOnly:!0})],G.prototype,"handle",void 0),G=Object(b.a)([Object(j.a)("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],G);var Q=n(23),K=n(871),X=n(202),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).availability=0,i.workerHandleUpdating=!0,i.editId=0,i}return Object(c.a)(n,[{key:"updating",get:function(){return this.updatingHandles.updating||this.workerHandleUpdating}},{key:"destroy",value:function(){this.workerHandle.destroy()}},{key:"initialize",value:function(){var e=this;this.workerHandle=new $(this.schedule),this.handles.add([this.workerHandle.on("notify-updating",(function(t){var n=t.updating;return e.workerHandleUpdating=n})),this.workerHandle.on("notify-availability",(function(t){var n=t.availability;return e._set("availability",n)}))])}},{key:"setup",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.serviceInfoFromLayer(t.layer),!Object(O.j)(i)){e.next=3;break}return e.abrupt("return");case 3:return a={configuration:this.convertConfiguration(t.configuration),serviceInfo:i,spatialReference:t.spatialReference.toJSON()},e.next=6,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("setup",a,n));case 6:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"configure",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.convertConfiguration(t),e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("configure",i,n));case 3:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("refresh",{},t));case 2:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCandidates",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={distance:t.distance,point:t.coordinateHelper.toPoint(t.point,new y.a).toJSON(),types:t.types,filter:Object(O.k)(t.filter)?t.filter.createQuery().toJSON():null},e.abrupt("return",this.workerHandle.invoke(i,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTiles",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={tiles:t.tiles,tileInfo:Object(O.k)(t.tileInfo)?t.tileInfo.toJSON():null,tileSize:t.tileSize},e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("updateTiles",i,n));case 3:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var i,a,o,s,c,l,u,b,d,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=this.editId++,b={id:u},e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("beginApplyEdits",b,n));case 3:return this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n)),e.next=6,this.updatingHandles.addPromise(Object(Q.y)(t.result,n));case 6:return d=e.sent,f={id:u,edits:{addedFeatures:null!=(i=null==(a=d.addedFeatures)?void 0:a.map((function(e){return e.objectId})))?i:[],deletedFeatures:null!=(o=null==(s=d.deletedFeatures)?void 0:s.map((function(e){return{objectId:e.objectId,globalId:e.globalId}})))?o:[],updatedFeatures:null!=(c=null==(l=d.updatedFeatures)?void 0:l.map((function(e){return e.objectId})))?c:[]}},e.next=10,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("endApplyEdits",f,n));case 10:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDebugInfo",value:function(e){return this.workerHandle.invokeMethod("getDebugInfo",{},e)}},{key:"convertConfiguration",value:function(e){return{filter:Object(O.k)(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}},{key:"serviceInfoFromLayer",value:function(e){var t;return"multipatch"===e.geometryType||"mesh"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((function(e){return e.toJSON()})),geometryType:X.a.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,globalIdField:e.globalIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}}]),n}(f.a);Object(b.a)([Object(v.b)({constructOnly:!0})],Z.prototype,"schedule",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],Z.prototype,"updating",null),Object(b.a)([Object(v.b)({readOnly:!0})],Z.prototype,"availability",void 0),Object(b.a)([Object(v.b)()],Z.prototype,"workerHandleUpdating",void 0),Z=Object(b.a)([Object(j.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],Z);var $=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,"FeatureServiceSnappingSourceWorker","fetchCandidates",e,{strategy:"dedicated"})}return Object(c.a)(n,[{key:"getTransferList",value:function(){return[]}}]),n}(K.a),ee=n(343),te=n(310),ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).pointOfInterest=null,i}return Object(c.a)(n,[{key:"tiles",get:function(){return[{id:"0/0/0",level:0,row:0,col:0,extent:Object(A.q)(-1e8,-1e8,1e8,1e8)}]}},{key:"tileInfo",get:function(){return new te.a({origin:new y.a({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new ee.a({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}},{key:"tileSize",get:function(){return this.tileInfo.size[0]}}]),n}(d.a);Object(b.a)([Object(v.b)({readOnly:!0})],ne.prototype,"tiles",null),Object(b.a)([Object(v.b)({readOnly:!0})],ne.prototype,"tileInfo",null),Object(b.a)([Object(v.b)({readOnly:!0})],ne.prototype,"tileSize",null),Object(b.a)([Object(v.b)({constructOnly:!0})],ne.prototype,"layer",void 0),Object(b.a)([Object(v.b)()],ne.prototype,"pointOfInterest",void 0),ne=Object(b.a)([Object(j.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],ne);var ie=n(601),re=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"updateTilesParameters",get:function(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}},{key:"updating",get:function(){return this.workerHandle.updating||this.updatingHandles.updating}},{key:"configuration",get:function(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}},{key:"availability",get:function(){return this.workerHandle.availability}},{key:"layer",get:function(){return this.layerSource.layer}},{key:"initialize",value:function(){var e=this,t=this.view;if(Object(O.k)(t))switch(t.type){case"2d":this.tilesOfInterest=new T({view:t,layer:this.layer}),this.workerHandle=new Z;break;case"3d":var n=t.resourceController;this.tilesOfInterest=new x({view:t}),this.workerHandle=new Z({schedule:function(e){return n.schedule(e)}})}else this.tilesOfInterest=new ne({layer:this.layer}),this.workerHandle=new Z;this.handles.add([Object(h.a)(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,"updateTilesParameters",(function(){return e.workerHandle.updateTiles(e.updateTilesParameters,null)}),2),this.handles.add([Object(g.b)((function(){return e.configuration}),(function(t){return e.workerHandle.configure(t,null)}))]),Object(O.k)(t)&&this.handles.add(Object(p.a)(ie.a,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",(function(n){n&&!e.debug?(e.debug=new G({view:t,handle:e.workerHandle}),e.handles.add(Object(h.a)(e.debug),"debug")):!n&&e.debug&&e.handles.remove("debug")}))),this.handles.add(this.layerSource.layer.on("apply-edits",(function(t){e.workerHandle.applyEdits(t,null)})))}},{key:"refresh",value:function(){this.workerHandle.refresh(null)}},{key:"fetchCandidates",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tilesOfInterest.pointOfInterest=t.coordinateHelper.toPoint(t.point,new y.a),e.next=3,this.workerHandle.fetchCandidates(Object(a.a)(Object(a.a)({},t),{},{filter:null}),n);case 3:return e.abrupt("return",e.sent.candidates.map((function(e){return Object(C.a)(e,t.coordinateHelper)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDebugInfo",value:function(e){return this.workerHandle.getDebugInfo(e)}}]),n}(Object(f.b)(d.a));Object(b.a)([Object(v.b)({constructOnly:!0})],re.prototype,"spatialReference",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],re.prototype,"layerSource",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],re.prototype,"view",void 0),Object(b.a)([Object(v.b)()],re.prototype,"tilesOfInterest",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],re.prototype,"updateTilesParameters",null),Object(b.a)([Object(v.b)({readOnly:!0})],re.prototype,"updating",null),Object(b.a)([Object(v.b)({readOnly:!0})],re.prototype,"configuration",null),Object(b.a)([Object(v.b)({readOnly:!0})],re.prototype,"availability",null),re=Object(b.a)([Object(j.a)("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],re)},797:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return M})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return z})),n.d(t,"j",(function(){return w}));var i=n(15),r=n(2),a=(n(14),n(13)),o=n(40),s=n(220),c=n(78),l=n(104),u=n(11),b=n(22),d=n(86),f=n(59),h=n(137),O=n(348),p=n(66),v=a.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return{plane:Object(f.d)(e.plane),origin:Object(b.c)(e.origin),basis1:Object(b.c)(e.basis1),basis2:Object(b.c)(e.basis2)}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j();return y(e.origin,e.basis1,e.basis2,t)}function y(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j();return Object(u.k)(i.origin,e),Object(u.k)(i.basis1,t),Object(u.k)(i.basis2,n),w(i),A(i,"fromValues()"),i}function w(e){Object(f.i)(e.basis2,e.basis1,e.origin,e.plane)}function k(e,t,n){e!==n&&g(e,n);var i=Object(u.e)(p.d.get(),E(e),t);return Object(u.f)(n.origin,n.origin,i),n.plane[3]-=t,n}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j(),n=(e[2]-e[0])/2,i=(e[3]-e[1])/2;return Object(u.w)(t.origin,e[0]+n,e[1]+i,0),Object(u.w)(t.basis1,n,0,0),Object(u.w)(t.basis2,0,i,0),Object(f.h)(0,0,1,0,t.plane),t}function I(e,t,n){return!!Object(f.m)(e.plane,t,n)&&C(e,n)}function S(e,t,n){var r=V.get();L(e,t,r,V.get());var a,s=Number.POSITIVE_INFINITY,c=Object(i.a)(W);try{for(c.s();!(a=c.n()).done;){var l=R(e,a.value,J.get()),b=p.d.get();if(Object(f.k)(r,l,b)){var d=Object(u.v)(p.d.get(),t.origin,b),h=Math.abs(Object(o.b)(Object(u.h)(t.direction,d)));h<s&&(s=h,Object(u.k)(n,b))}}}catch(O){c.e(O)}finally{c.f()}return s===Number.POSITIVE_INFINITY?_(e,t,n):n}function _(e,t,n){if(I(e,t,n))return n;var r=V.get(),a=V.get();L(e,t,r,a);var o,s=Number.POSITIVE_INFINITY,c=Object(i.a)(W);try{for(c.s();!(o=c.n()).done;){var l=R(e,o.value,J.get()),b=p.d.get();if(Object(f.l)(r,l,b)){var d=Object(h.d)(t,b);if(!Object(f.o)(a,b))continue;d<s&&(s=d,Object(u.k)(n,b))}}}catch(O){c.e(O)}finally{c.f()}return T(e,t.origin)<s&&H(e,t.origin,n),n}function H(e,t,n){var i=Object(f.s)(e.plane,t,p.d.get()),r=Object(d.i)(F(e,e.basis1),i,-1,1,p.d.get()),a=Object(d.i)(F(e,e.basis2),i,-1,1,p.d.get());return Object(u.j)(n,Object(u.f)(p.d.get(),r,a),e.origin),n}function P(e,t,n){var i=e.origin,r=e.basis1,a=e.basis2,o=Object(u.j)(p.d.get(),t,i),s=Object(O.d)(r,o),c=Object(O.d)(a,o),l=Object(O.d)(E(e),o);return Object(u.w)(n,s,c,l)}function T(e,t){var n=P(e,t,p.d.get()),i=e.basis1,r=e.basis2,a=Object(u.p)(i),o=Object(u.p)(r),s=Math.max(Math.abs(n[0])-a,0),c=Math.max(Math.abs(n[1])-o,0),l=n[2];return s*s+c*c+l*l}function M(e,t){return Math.sqrt(T(e,t))}function x(e,t){return Object(f.o)(e.plane,t)&&C(e,t)}function N(e,t){var n=-e.plane[3];return Object(O.d)(E(e),t)-n}function z(e,t,n,i){return e!==i&&g(e,i),Object(c.c)(B,Object(c.i)(B),t,n),Object(u.q)(i.basis1,e.basis1,B),Object(u.q)(i.basis2,e.basis2,B),w(i),i}function E(e){return Object(f.r)(e.plane)}function C(e,t){var n=Object(u.j)(p.d.get(),t,e.origin),i=Object(u.t)(e.basis1),r=Object(u.t)(e.basis2),a=Object(u.h)(e.basis1,n),o=Object(u.h)(e.basis2,n);return-a-i<0&&a-i<0&&-o-r<0&&o-r<0}function F(e,t){var n=J.get();return Object(u.k)(n.origin,e.origin),Object(u.k)(n.vector,t),n}function R(e,t,n){var i=e.basis1,r=e.basis2,a=e.origin,o=Object(u.e)(p.d.get(),i,t.origin[0]),s=Object(u.e)(p.d.get(),r,t.origin[1]);Object(u.f)(n.origin,o,s),Object(u.f)(n.origin,n.origin,a);var c=Object(u.e)(p.d.get(),i,t.direction[0]),l=Object(u.e)(p.d.get(),r,t.direction[1]);return Object(u.e)(n.vector,Object(u.f)(c,c,l),2),n}function A(e,t){Math.abs(Object(u.h)(e.basis1,e.basis2)/(Object(u.p)(e.basis1)*Object(u.p)(e.basis2)))>1e-6&&v.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(Object(u.h)(e.basis1,E(e)))>1e-6&&v.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(u.h)(E(e),e.origin)-e.plane[3])>1e-6&&v.warn(t,"Plane offset is not consistent with plane origin")}function L(e,t,n,i){var r=E(e);Object(f.i)(r,t.direction,t.origin,n),Object(f.i)(Object(f.r)(n),r,t.origin,i)}var U={plane:Object(f.d)(),origin:Object(b.g)(0,0,0),basis1:Object(b.g)(1,0,0),basis2:Object(b.g)(0,1,0)},V=new s.a(f.d),J=new s.a(d.d),D=Object(b.e)(),q=new s.a((function(){return{origin:null,basis1:null,basis2:null,plane:null}})),W=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Y=Object(l.d)(),B=Object(l.d)();Object.freeze({__proto__:null,BoundedPlaneClass:function e(){Object(r.a)(this,e),this.plane=Object(f.d)(),this.origin=Object(b.e)(),this.basis1=Object(b.e)(),this.basis2=Object(b.e)()},create:j,wrap:function(e,t,n){var i=q.get();return i.origin=e,i.basis1=t,i.basis2=n,i.plane=Object(f.v)(0,0,0,0),w(i),i},copy:g,copyWithoutVerify:function(e,t){Object(u.k)(t.origin,e.origin),Object(u.k)(t.basis1,e.basis1),Object(u.k)(t.basis2,e.basis2),Object(f.c)(e.plane,t.plane)},fromValues:y,updateUnboundedPlane:w,elevate:k,setExtent:function(e,t,n){return m(t,n),k(n,N(e,e.origin),n),n},fromAABoundingRect:m,intersectRay:I,intersectRayClosestSilhouette:function(e,t,n){if(I(e,t,n))return n;var i=S(e,t,p.d.get());return Object(u.f)(n,t.origin,Object(u.e)(p.d.get(),t.direction,Object(u.m)(t.origin,i)/Object(u.p)(t.direction))),n},closestPointOnSilhouette:S,closestPoint:_,projectPoint:H,projectPointLocal:P,distance2:T,distance:M,distanceToSilhouette:function(e,t){var n,r=Number.NEGATIVE_INFINITY,a=Object(i.a)(W);try{for(a.s();!(n=a.n()).done;){var o=R(e,n.value,J.get()),s=Object(d.e)(o,t);s>r&&(r=s)}}catch(c){a.e(c)}finally{a.f()}return Math.sqrt(r)},extrusionContainsPoint:x,axisAt:function(e,t,n,i){return function(e,t,n){switch(t){case 0:Object(u.k)(n,e.basis1),Object(u.r)(n,n);break;case 1:Object(u.k)(n,e.basis2),Object(u.r)(n,n);break;case 2:Object(u.k)(n,E(e))}return n}(e,n,i)},altitudeAt:N,setAltitudeAt:function(e,t,n,i){var r=N(e,t),a=Object(u.e)(D,E(e),n-r);return Object(u.f)(i,t,a),i},equals:function(e,t){return Object(u.o)(e.basis1,t.basis1)&&Object(u.o)(e.basis2,t.basis2)&&Object(u.o)(e.origin,t.origin)},transform:function(e,t,n){return e!==n&&g(e,n),Object(c.a)(Y,t),Object(c.e)(Y,Y),Object(u.q)(n.basis1,e.basis1,Y),Object(u.q)(n.basis2,e.basis2,Y),Object(u.q)(Object(f.r)(n.plane),Object(f.r)(e.plane),Y),Object(u.q)(n.origin,e.origin,t),Object(f.t)(n.plane,n.origin,n.plane),n},rotate:z,normal:E,UP:U})},829:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(554),r=n(9),a=n(2),o=n(3),s=n(5),c=n(6),l=n(180),u=n(424),b=n(548),d=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,Object(r.a)(Object(r.a)({},e),{},{constraint:new l.d(e.coordinateHelper,e.targetPoint)}))}return Object(o.a)(n,[{key:"hints",get:function(){return[new b.a(this.targetPoint)]}}]),n}(u.a);function f(e,t){switch(e.type){case"edge":return new i.a({coordinateHelper:t,edgeStart:t.fromPoint(e.start),edgeEnd:t.fromPoint(e.end),targetPoint:t.fromPoint(e.target),objectId:e.objectId});case"vertex":return new d({coordinateHelper:t,targetPoint:t.fromPoint(e.target),objectId:e.objectId})}}},871:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(15),r=n(9),a=n(2),o=n(3),s=n(109),c=n(127),l=n(13),u=n(4),b=n(23),d=n(413),f=l.a.getLogger("esri.core.workers.WorkerHandle"),h=function(){function e(t,n,o){var s=this,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(a.a)(this,e),this._mainMethod=n,this._listeners=[],this._promise=Object(d.b)(t,Object(r.a)(Object(r.a)({},c),{},{schedule:o})).then((function(e){if(void 0===s._thread){s._thread=e,s._promise=null,c.hasInitialize&&s.broadcast({},"initialize");var t,n=Object(i.a)(s._listeners);try{for(n.s();!(t=n.n()).done;){var r=t.value;s._connectListener(r)}}catch(a){n.e(a)}finally{n.f()}}else e.close()})),this._promise.catch((function(e){return f.error("Failed to initialize ".concat(t," worker: ").concat(e))}))}return Object(o.a)(e,[{key:"on",value:function(e,t){var n=this,i={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(i),this._connectListener(i),Object(c.c)((function(){i.removed=!0,Object(s.i)(n._listeners,i),n._thread&&Object(u.k)(i.threadHandle)&&i.threadHandle.remove()}))}},{key:"destroy",value:function(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}},{key:"invoke",value:function(e,t){return this.invokeMethod(this._mainMethod,e,t)}},{key:"invokeMethod",value:function(e,t,n){var i=this;if(this._thread){var r=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:r,signal:n})}return this._promise?this._promise.then((function(){return Object(b.v)(n),i.invokeMethod(e,t,n)})):Promise.reject(null)}},{key:"broadcast",value:function(e,t){var n=this;return this._thread?Promise.all(this._thread.broadcast(t,e)).then((function(){})):this._promise?this._promise.then((function(){return n.broadcast(e,t)})):Promise.reject()}},{key:"promise",get:function(){return this._promise}},{key:"_connectListener",value:function(e){this._thread&&this._thread.on(e.eventName,e.callback).then((function(t){e.removed||(e.threadHandle=t)}))}}]),e}()}}]);
//# sourceMappingURL=78.2b5b9ead.chunk.js.map