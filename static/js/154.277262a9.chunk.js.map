{"version":3,"sources":["../node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js"],"names":["i","e","o","n","a","s","size","c","maxSize","m","node","r","opacity","y","cimOptions","d","feature","h","fieldMap","p","geometryType","u","style","g","f","Math","min","t","clone","l","preserveOutlineWidth","M","data","symbol","type","rasterizeCIMSymbolAsync","scaleFactor","b","w","document","createElement","width","imageData","height","getContext","putImageData","C","D","scale","ceil","I","Image","src","toDataURL","appendChild","Map","transform","hasZ","hasM","has","set","getLogger","error","get","geometry","referencesGeometry","repurposeFeature","evaluate","$feature","warn"],"mappings":"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","file":"static/js/154.277262a9.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{px2pt as t}from\"../../core/screenUtils.js\";import{CIMSymbolRasterizer as e}from\"../cim/CIMSymbolRasterizer.js\";import{getCIMSymbolSize as a,scaleCIMSymbolTo as l}from\"./cimSymbolUtils.js\";const i=new e(null,!0),o=120;async function n(e,n={}){const{size:s,maxSize:c,node:m,opacity:r}=n,y=n.cimOptions||n,{feature:d,fieldMap:h,geometryType:p,style:u}=y,g=a(e),f=Math.min(null!=s?s:g,null!=c?c:t(o));f!==g&&(e=e.clone(),l(e,f,{preserveOutlineWidth:!0}));let M=3;e&&e.data&&e.data.symbol&&\"CIMPointSymbol\"!==e.data.symbol.type&&(M=1);const b=await i.rasterizeCIMSymbolAsync(e,d,h,p,{scaleFactor:M,style:u}),w=document.createElement(\"canvas\");w.width=b.imageData.width,w.height=b.imageData.height;w.getContext(\"2d\").putImageData(b.imageData,0,0);let C=w.width/M,D=w.height/M;if(null!=s&&(null==(null==n?void 0:n.scale)||(null==n?void 0:n.scale))){const t=C/D;C=t<=1?Math.ceil(f*t):f,D=t<=1?f:Math.ceil(f/t)}const I=new Image(C,D);return I.src=w.toDataURL(),null!=r&&(I.style.opacity=`${r}`),m&&m.appendChild(I),I}export{n as previewCIMSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{unquantizeMultipoint as t,unquantizePolyline as o,unquantizePolygon as n,unquantizePoint as a}from\"../../../geometry/support/quantizationUtils.js\";function s(e,t,o,n,a){const s=e.referencesGeometry()&&a?u(t,n,a):t,i=e.repurposeFeature(s);try{return e.evaluate({...o,$feature:i})}catch(c){return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",c),null}}const i=new Map;function u(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;i.has(r)||i.set(r,c(r));const s=i.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const i={};switch(s){case\"esriGeometryPoint\":return(e,r,t,o)=>a(r,i,e,t,o);case\"esriGeometryPolygon\":return(e,r,t,o)=>n(r,i,e,t,o);case\"esriGeometryPolyline\":return(e,r,t,n)=>o(r,i,e,t,n);case\"esriGeometryMultipoint\":return(e,r,o,n)=>t(r,i,e,o,n);default:return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new e(\"mapview-arcade\",`Unable to handle geometryType: ${s}`)),e=>e}}export default s;\n"],"sourceRoot":""}