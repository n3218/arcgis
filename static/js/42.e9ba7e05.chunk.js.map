{"version":3,"sources":["../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/cim/Rasterizer.js"],"names":["r","t","this","_textRasterizationCanvas","document","createElement","o","n","getContext","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","a","computeTextWidth","h","length","width","height","renderedLineHeight","Math","round","pixelRatio","renderedHaloSize","halo","size","renderedWidth","renderedHeight","fillStyle","slice","toString","i","color","haloStyle","e","l","d","c","s","textAlign","g","f","p","renderHalo","globalCompositeOperation","fillText","u","getImageData","x","Uint8Array","data","premultiplyColors","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","drawImage","lineWidth","strokeText","font","style","weight","family","textBaseline","horizontalAlignment","max","measureText","push","cos","PI","sin","Legend","Preview","targetSize","frame","xmax","xmin","ymax","ymin","referenceSize","scaleFactor","M","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","C","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","m","_pictureMarkerCache","centroid","z","analyzeCIMSymbol","I","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","cim","type","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","materialHash","get","url","responseType","signal","set","_getRasterizedResource","y","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","min","P","createImageData","Uint8ClampedArray","rasterizedImage","_imageDataToCanvas","save","translate","rotate","restore","imageData","anchorPosition","_imageDataCanvas","putImageData","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","_embedCIMLayerInVectorMarker","markerPlacement","JSON","stringify","rasterizeJSONResource","_rasterizeTextResource","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","outlineColor","outlineSize","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","_imageTo32Array","markerGraphics","symbol","symbolLayers","Object","keys","map","name","alias","materialOverrides","_rasterizationCanvas","rasterizeSimpleFill","rasterizeSimpleLine","cap","fromSimpleMarker","fromCIMHatchFill","fromCIMInsidePolygon","rasterize","ImageData","setAttribute","oldColor","newColor"],"mappings":"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","file":"static/js/42.e9ba7e05.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as a}from\"../../core/string.js\";import{getJsonType as i,isPolygon as s,isPolyline as o}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as n,analyzeCIMResource as c}from\"./cimAnalyzer.js\";import l from\"./Rasterizer.js\";import{TextRasterizer as m}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as h,evaluateValueOrFunction as f,colorToArray as g}from\"./utils.js\";import{scaleCIMMarker as y}from\"../support/cimSymbolUtils.js\";import u from\"../support/Symbol3DAnchorPosition2D.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,a)=>{if(e&&e.targetSize){let i;if(a){const t=Math.max(a.frame.xmax-a.frame.xmin,a.frame.ymax-a.frame.ymin);i=e.targetSize/r(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new l,this._textRasterizer=new m,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,a,s,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":i(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await n(e.data,c,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=h(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(t,r){const a=t.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await e(t.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=f(n.offsetX,t,i,s)*e||0,y=f(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=f(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=f(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),a=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=r(h)-m[0]*(.5+y),C=r(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=a.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;a.save(),a.translate(r(e.offsetX),-r(e.offsetY)),a.translate(l,m),a.rotate(i),a.translate(-l,-m),a.drawImage(t,o,n),a.restore()}else a.drawImage(t,o+r(e.offsetX),n-r(e.offsetY))}const h=new u({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?a.getImageData(0,0,t.width,t.height):a.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(e,t,r,i,s,o){let n,c,l,m;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=i&&i.style?i.style:p.Legend,h=\"esriGeometryPolyline\"===r?M.stroke[m]:M.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=f(e.width,t,s,o),{image:a,width:i,height:n}=this._getPictureResource(e,r);return this._rasterizePictureResource(e,a,i,n,h,r)}return null}({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=f(e.offsetX,t,s,o),e.cim.offsetY=f(e.offsetY,t,s,o),e.cim.rotation=f(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=P(e,t,s,o)),l=a(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,h)}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r));else{({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=r.image,i=r.size[0],c=r.size[1]}return this._rasterizePictureResource(e,a,i,c,h,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,i,s,o),m;({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=d(i,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=f(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a);return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}y(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(m=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),h.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=f(e.text,t,a,i);if(!o||0===o.length)return null;const n=f(e.fontName,t,a,i),c=f(e.style,t,a,i),l=f(e.weight,t,a,i),m=f(e.decoration,t,a,i),h=f(e.size,t,a,i)*s,y=f(e.horizontalAlignment,t,a,i),u=f(e.verticalAlignment,t,a,i),p=g(f(e.color,t,a,i)),M=g(f(e.outlineColor,t,a,i)),C={color:p,size:h,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:m},halo:{size:f(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,a,i,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=r(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=r(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(a,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:r(e.cim.offsetX)||0,m42:r(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;s(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):o(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const s of d){const e=s?s.length:0;if(e>1){let t=s[0];m.moveTo(r(t[0]),r(t[1]));for(let a=1;a<e;++a)t=s[a],m.lineTo(r(t[0]),r(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;const i=a.height/a.width,s=t?i>1?r(t):r(t)/i:a.width,o=t?i>1?r(t)*i:r(t):a.height;return{image:this._imageTo32Array(a,s,o),width:s,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=s(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=c(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import t from\"./Rect.js\";import{getSDFInfo as a,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as i}from\"./utils.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(i,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===i.type||\"esriSFS\"===i.type){const[r,t,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,i.style,s);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===i.type||\"esriSLS\"===i.type){const[r,t,a]=e.rasterizeSimpleLine(i.style,i.cap);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===i.type||\"esriSMS\"===i.type||\"line-marker\"===i.type?(m=r.fromSimpleMarker(i),f=a(m)):\"CIMHatchFill\"===i.type?(m=r.fromCIMHatchFill(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):i.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===i.markerPlacement.type?(m=r.fromCIMInsidePolygon(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=i,f=a(m)),f&&!o){const[e,r,t]=n(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=r.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(e,r,t,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=r;const n=this._rasterizationCanvas.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):(t.setAttribute(\"width\",`${e}px`),t.setAttribute(\"height\",`${r}px`),n.drawImage(t,0,0,e,r));const o=n.getImageData(0,0,e,r),m=new Uint8Array(o.data);if(a)for(const i of a)if(i&&i.oldColor&&4===i.oldColor.length&&i.newColor&&4===i.newColor.length){const[e,r,t,a]=i.oldColor,[n,s,o,l]=i.newColor;if(e===n&&r===s&&t===o&&a===l)continue;for(let i=0;i<m.length;i+=4)e===m[i]&&r===m[i+1]&&t===m[i+2]&&a===m[i+3]&&(m[i]=n,m[i+1]=s,m[i+2]=o,m[i+3]=l)}let l;for(let i=0;i<m.length;i+=4)l=m[i+3]/255,m[i]=m[i]*l,m[i+1]=m[i+1]*l,m[i+2]=m[i+2]*l;let f=m,c=e,h=r;const p=s;if(c>=p||h>=p){const t=c/h;t>1?(c=p,h=Math.round(p/t)):(h=p,c=Math.round(p*t)),f=new Uint8Array(4*c*h);const a=new Uint8ClampedArray(f.buffer);i(m,e,r,a,c,h,!1)}return{size:[c,h],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n"],"sourceRoot":""}